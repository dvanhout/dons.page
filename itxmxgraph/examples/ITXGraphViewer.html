<html>

<head>
  <title>mxGraph iFrame</title>

  <!-- Sets the basepath for the library if not in same directory -->
  <script type="text/javascript">
    mxBasePath = 'https://jgraph.github.io/mxgraph/javascript/src';
  </script>

  <!-- Loads and initializes the library -->
  <script type="text/javascript" src="https://jgraph.github.io/mxgraph/javascript/src/js/mxClient.js"></script>

  <!-- Example code -->
  <script type="text/javascript">
        // Program starts here. Creates a sample graph in the
    		// DOM node with the specified ID. This function is invoked
    		// from the onLoad event handler of the document (see below).
    		function main(container) {
					var originUrl = "https://cloud3.intelex.com";

    			// Checks if browser is supported
    			if (!mxClient.isBrowserSupported()) {
    				// Displays an error message if the browser is
    				// not supported.
    				mxUtils.error('Browser is not supported!', 200, false);
    			} else {
						// Creates the graph inside the DOM node.

						// function that gets called when message is received from host
						function receiveMessage(e) {					
  						// make sure sender is correct - i.e. fr Intelex
							if (e.origin !== originUrl) { 
								return; 
							} else { 
								var xml = e.data.xml; 
								// create graph
								makeGraph(xml);
							}							
						}

						function makeGraph(xml) {
							// creates a graph from the submitted xml
							var graph = new mxGraph(container);
							var doc = mxUtils.parseXml(xml);
							var codec = new mxCodec(doc);
							var elt = doc.documentElement.firstChild;
							var cells = [];

							while (elt != null) {
								cells.push(codec.decode(elt));
								elt = elt.nextSibling;
							}

							graph.addCells(cells);

						}

						// event listener for incoming message
					window.addEventListener('message', receiveMessage, { passive: false });
					}
    		};

  </script>

</head>

<!-- Page passes the container for the graph to the program -->

<body onload="main(document.getElementById('graphContainer'))">

  <!-- Creates a container for the graph with a grid wallpaper -->
  <div id="graphContainer" style="position:relative;overflow:scroll;width:1200;height:800;background:url('https://jgraph.github.io/mxgraph/javascript/examples/editors/images/grid.gif');cursor:default;">
  </div>
</body>

</html>